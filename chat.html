<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>SovaApp — Чаты</title>
  <meta name="viewport" content="width=1000">
  <link rel="stylesheet" href="styles.css">
  <style>
    body, html {height: 100%;margin: 0;background: #f7faf7;font-family: 'Segoe UI', Arial, sans-serif;}
    .chat-app-main {display: flex;height: 100vh;}
    .sidebar {width: 300px;background: #fff;border-right: 1.5px solid #e2e7ea;display: flex;flex-direction: column;}
    .logo-area {display: flex;align-items: center;padding: 25px 26px 18px 26px;gap: 14px;}
    .logo-area svg {width: 38px; height: 38px;background: #20A042;border-radius: 50%;}
    .logo-area span {font-size: 25px;font-weight: 700;color: #202820;letter-spacing: 1.5px;}
    .new-chat-btn {background: #20a042;color: #fff;font-size: 19px;border: none;border-radius: 10px;margin: 0 20px 20px 20px;padding: 15px 0;cursor: pointer;font-weight: 600;transition: background 0.16s;box-shadow: 0 2px 7px #a9c4b638;}
    .new-chat-btn:hover {background: #158031;}
    .chat-list {flex: 1;overflow-y: auto;padding: 0 8px 0 0;margin-bottom: 18px;}
    .chat-item {display: flex;align-items: center;gap: 14px;padding: 13px 20px;cursor: pointer;border-radius: 11px;transition: background .13s;margin-bottom: 4px;}
    .chat-item.active, .chat-item:hover {background: #e8f5ee;}
    .chat-avatar {width: 38px;height: 38px;border-radius: 50%;background: #76b988;display: flex;align-items: center;justify-content: center;font-size: 19px;color: #fff;font-weight: bold;}
    .chat-info {flex: 1;display: flex;flex-direction: column;}
    .chat-title {font-size: 16.5px;font-weight: 600;color: #2e4638;}
    .chat-last {font-size: 13px;color: #8e9a98;margin-top: 2px;font-weight: 400;}
    .chat-time {font-size: 12px;color: #97b0a3;min-width: 37px;text-align: right;font-weight: 500;}
    .sidebar-bottom {padding: 16px 22px 18px 22px;border-top: 1px solid #e6edea;display: flex;align-items: center;justify-content: flex-end;}
    .logout-btn {border: 2px solid #20a042;color: #20a042;background: #fff;border-radius: 8px;font-size: 16px;font-weight: 500;padding: 7px 18px;cursor: pointer;transition: background .13s, color .13s;}
    .logout-btn:hover {background: #20a042;color: #fff;}
    .chat-content {flex: 1;background: #f5faf5;display: flex;flex-direction: column;align-items: center;justify-content: center;position: relative;min-width: 0;min-height: 0;overflow: hidden;}
    .pattern-bg {position: absolute;inset: 0;z-index: 0;opacity: .11;pointer-events: none;}
    .chat-content-main {z-index: 2;position: relative;width: 100%;display: flex;flex-direction: column;align-items: center;}
    .main-owl-anim {margin-top: 0;margin-bottom: 18px;animation: owl-bounce 1.8s infinite cubic-bezier(.4,0,.5,1);}
    @keyframes owl-bounce {0%, 100% { transform: translateY(0);}14% { transform: translateY(-12px);}22% { transform: translateY(0);}28% { transform: translateY(-6px);}34% { transform: translateY(0);}}
    .main-owl-anim svg {width: 85px; height: 85px;}
    .empty-text-title {font-size: 21px;font-weight: 600;color: #333e2d;text-align: center;margin-bottom: 8px;}
    .empty-text-sub {font-size: 16px;color: #91a49a;text-align: center;}
    /* Модалка новый чат */
    .modal-bg {position: fixed;inset: 0;background: rgba(90,110,100,0.13);display: flex;align-items: center;justify-content: center;z-index: 100;}
    .modal {background: #fff;border-radius: 17px;box-shadow: 0 6px 40px #6acebf1a;padding: 36px 33px 32px 33px;min-width: 340px;display: flex;flex-direction: column;align-items: center;gap: 14px;position: relative;animation: popin .32s;}
    .modal-title {font-size: 22px;color: #213f28;font-weight: 700;margin-bottom: 8px;}
    .modal input[type="text"] {padding: 12px;font-size: 17px;border-radius: 7px;border: 1px solid #b3dbc2;outline: none;width: 100%;background: #f6fcf7;margin-bottom: 8px;transition: border .13s;}
    .modal input[type="text"]:focus {border: 1.5px solid #20a042;}
    .modal-btns {display: flex;width: 100%;gap: 14px;justify-content: flex-end;}
    .modal-btn {background: #20a042;color: #fff;font-size: 17px;border: none;border-radius: 8px;padding: 10px 22px;cursor: pointer;font-weight: 500;transition: background .14s;}
    .modal-btn:hover {background: #18792e;}
    .modal-btn-cancel {background: #f4f6f5;color: #18a042;border: 1.5px solid #20a042;}
    .modal-btn-cancel:hover {background: #edf9f0;color: #146b29;}
    /* Анимация: сова с лупой */
    .modal-owl-search {
      display: flex;flex-direction: column;align-items: center;margin-bottom: 8px;
      animation: popin .5s;
    }
    .modal-owl-search svg {
      width: 62px; height: 62px;
      animation: eye-blink 2.1s infinite;
    }
    @keyframes eye-blink {0%,100% {transform: scaleY(1);} 7%{transform: scaleY(0.33);} 11%{transform: scaleY(1);} 30%{transform: scaleY(1);} 37%{transform: scaleY(0.33);} 41%{transform: scaleY(1);} }
    /* Сова машет лапкой */
    .main-owl-anim.waving svg .wing {
      transform-origin: 53px 47px;
      animation: wing-wave .9s infinite;
    }
    @keyframes wing-wave {0%, 100%{transform:rotate(0);} 16%{transform:rotate(-24deg);} 22%{transform:rotate(-38deg);} 28%{transform:rotate(-24deg);} 36%{transform:rotate(0);}}
    ::-webkit-scrollbar {width: 7px;background: #e7f5e7;}
    ::-webkit-scrollbar-thumb {background: #cbe1d3;border-radius: 5px;}
  </style>
</head>
<body>
  <div class="chat-app-main">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo-area">
        <svg viewBox="0 0 60 60" fill="none">
          <circle cx="30" cy="30" r="28" fill="#20A042"/>
          <ellipse cx="39" cy="25" rx="7" ry="7" fill="#121212"/>
          <ellipse cx="21" cy="26" rx="7" ry="7" fill="#121212"/>
          <ellipse cx="30" cy="41" rx="17" ry="9" fill="#158031"/>
          <ellipse cx="30" cy="30" rx="5" ry="7" fill="#158031"/>
          <ellipse cx="30" cy="31" rx="2.5" ry="4" fill="#FF6B21"/>
        </svg>
        <span>SovaApp</span>
      </div>
      <button class="new-chat-btn" id="new-chat-btn">+ Новый чат</button>
      <div class="chat-list" id="chat-list"></div>
      <div class="sidebar-bottom">
        <button class="logout-btn" id="logout-btn">Выйти</button>
      </div>
    </div>
    <!-- Chat Content -->
    <div class="chat-content">
      <!-- Паттерн-совы на фоне -->
      <div class="pattern-bg">
        <svg width="100%" height="100%" viewBox="0 0 500 500" fill="none">
          <g><circle cx="30" cy="30" r="10" fill="#20A042"/><ellipse cx="33" cy="28" rx="2.7" ry="2.7" fill="#121212"/><ellipse cx="27" cy="32" rx="2.7" ry="2.7" fill="#121212"/><ellipse cx="30" cy="35" rx="2" ry="2.7" fill="#FF6B21"/></g>
          <g transform="translate(120,90)"><circle cx="0" cy="0" r="9" fill="#20A042"/><ellipse cx="3" cy="-2" rx="2.3" ry="2.3" fill="#121212"/><ellipse cx="-3" cy="2" rx="2.3" ry="2.3" fill="#121212"/><ellipse cx="0" cy="4" rx="1.6" ry="2.2" fill="#FF6B21"/></g>
          <g transform="translate(240,220)"><circle cx="0" cy="0" r="8" fill="#20A042"/><ellipse cx="2.4" cy="-1.5" rx="2" ry="2" fill="#121212"/><ellipse cx="-2.4" cy="1.5" rx="2" ry="2" fill="#121212"/><ellipse cx="0" cy="3" rx="1.2" ry="1.7" fill="#FF6B21"/></g>
          <g transform="translate(370,120)"><circle cx="0" cy="0" r="10" fill="#20A042"/><ellipse cx="2.7" cy="-2" rx="2.7" ry="2.7" fill="#121212"/><ellipse cx="-2.7" cy="2" rx="2.7" ry="2.7" fill="#121212"/><ellipse cx="0" cy="4" rx="2" ry="2.7" fill="#FF6B21"/></g>
          <g transform="translate(400,380)"><circle cx="0" cy="0" r="9" fill="#20A042"/><ellipse cx="3" cy="-2" rx="2.3" ry="2.3" fill="#121212"/><ellipse cx="-3" cy="2" rx="2.3" ry="2.3" fill="#121212"/><ellipse cx="0" cy="4" rx="1.6" ry="2.2" fill="#FF6B21"/></g>
          <g transform="translate(60,400)"><circle cx="0" cy="0" r="8" fill="#20A042"/><ellipse cx="2.4" cy="-1.5" rx="2" ry="2" fill="#121212"/><ellipse cx="-2.4" cy="1.5" rx="2" ry="2" fill="#121212"/><ellipse cx="0" cy="3" rx="1.2" ry="1.7" fill="#FF6B21"/></g>
        </svg>
      </div>
      <!-- Основной блок чата -->
      <div class="chat-content-main" id="chat-content-main"></div>
    </div>
  </div>
  <!-- Скрипт: логика интерфейса -->
  <script>
    // DEMO-данные чатов (заменишь на свои из Firebase)
    const chats = [
      {id: 1, title: "Low", last: "Нет сообщений", time: "", initial: "L"},
      {id: 2, title: "SovaTest", last: "Нет сообщений", time: "", initial: "S"},
    ];
    let selectedChat = 0;
    // Вывод списка чатов
    function renderChats() {
      const chatList = document.getElementById('chat-list');
      chatList.innerHTML = "";
      chats.forEach((chat, i) => {
        const div = document.createElement('div');
        div.className = "chat-item" + (i===selectedChat ? " active" : "");
        div.innerHTML = `
          <div class="chat-avatar">${chat.initial}</div>
          <div class="chat-info">
            <div class="chat-title">${chat.title}</div>
            <div class="chat-last">${chat.last}</div>
          </div>
          <div class="chat-time">${chat.time}</div>
        `;
        div.onclick = () => selectChat(i);
        chatList.appendChild(div);
      });
    }
    // Выбор чата
    function selectChat(idx) {
      selectedChat = idx;
      renderChats();
      renderEmpty();
    }
    // Пустой чат — сова машет лапкой
    function renderEmpty() {
      document.getElementById('chat-content-main').innerHTML = `
        <div class="main-owl-anim waving">
          <svg width="85" height="85" viewBox="0 0 60 60">
            <circle cx="30" cy="30" r="28" fill="#20A042"/>
            <ellipse cx="39" cy="25" rx="7" ry="7" fill="#121212"/>
            <ellipse cx="21" cy="26" rx="7" ry="7" fill="#121212"/>
            <ellipse cx="30" cy="41" rx="17" ry="9" fill="#158031"/>
            <ellipse cx="30" cy="30" rx="5" ry="7" fill="#158031"/>
            <ellipse cx="30" cy="31" rx="2.5" ry="4" fill="#FF6B21"/>
            <ellipse class="wing" cx="53" cy="47" rx="6" ry="10" fill="#158031"/>
          </svg>
        </div>
        <div class="empty-text-title">Нет сообщений</div>
        <div class="empty-text-sub">Поприветствуйте собеседника!</div>
      `;
    }
    // Новый чат: сова с лупой, поле поиска
    function showNewChatModal() {
      const modal = document.createElement('div');
      modal.className = "modal-bg";
      modal.innerHTML = `
        <div class="modal">
          <div class="modal-owl-search">
            <svg viewBox="0 0 62 62">
              <circle cx="31" cy="31" r="29" fill="#20A042"/>
              <ellipse cx="23" cy="27" rx="7" ry="7" fill="#121212"/>
              <ellipse cx="39" cy="27" rx="7" ry="7" fill="#121212"/>
              <ellipse cx="31" cy="44" rx="17" ry="9" fill="#158031"/>
              <ellipse cx="31" cy="32" rx="5" ry="7" fill="#158031"/>
              <ellipse cx="31" cy="33" rx="2.5" ry="4" fill="#FF6B21"/>
              <g>
                <circle cx="48" cy="45" r="7" fill="#fff" opacity="0.8"/>
                <circle cx="48" cy="45" r="5.2" fill="#d1d1d1"/>
                <rect x="52" y="49" width="9" height="3" rx="1.5" fill="#b0b0b0" transform="rotate(45 56 50.5)" />
              </g>
            </svg>
          </div>
          <div class="modal-title">Поиск контакта</div>
          <input type="text" placeholder="Имя, email или ник" id="modal-new-chat-input">
          <div class="modal-btns">
            <button class="modal-btn" id="modal-ok">Создать</button>
            <button class="modal-btn modal-btn-cancel" id
